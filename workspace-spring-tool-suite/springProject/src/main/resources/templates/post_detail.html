<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>글 조회</title>
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
    <style>
		/* 이미지 파일 input 요소를 정사각형 모양으로 설정 */
		        #imagePathWrapper {
		            width: 300px; /* 원하는 크기로 설정 */
		            height: 300px; /* 너비와 같은 크기로 설정 */
		            position: relative; /* 위치 설정을 위해 상대 위치 설정 */
		            overflow: hidden; /* 내용이 넘치는 경우 숨김 처리 */
		            border: 1px solid #ced4da; /* 테두리 설정 */
		            display: block; /* 블록 요소로 설정하여 가로 정렬을 적용 */
		            margin: 0 auto; /* 가운데 정렬 */
		        }

		        /* 파일 선택(input 태그) 기본 텍스트 숨기기 */
		        #imagePath {
		            position: absolute; /* 절대 위치로 설정하여 부모 요소 내에서 위치 조정 */
		            top: 0; /* 부모 요소의 상단에 위치 */
		            left: 0; /* 부모 요소의 왼쪽에 위치 */
		            opacity: 0; /* 투명도를 0으로 설정하여 숨김 */
		            width: 100%; /* 부모 요소의 너비에 맞춤 */
		            height: 100%; /* 부모 요소의 높이에 맞춤 */
		            cursor: pointer; /* 마우스 커서를 포인터로 변경하여 클릭 가능하도록 설정 */
		        }

		        /* 이미지 미리 보기 */
		        #imagePreview {
		            display: block;
		            width: 100%; /* 부모 요소의 너비에 맞춤 */
		            height: 100%; /* 부모 요소의 높이에 맞춤 */
		            object-fit: cover; /* 이미지가 요소에 맞춰 보이도록 설정 */
		        }

		        /* 위치 정보 및 글 내용 스타일링 */
		        .custom-form {
		            max-width: 600px; /* 폼의 최대 너비 설정 */
		            margin: 0 auto; /* 가운데 정렬 */
		        }

		        /* 위치 정보, 글 내용의 가로 정렬 */
		        .custom-form .form-group {
		            display: flex;
		            flex-direction: column;
		        }
				
				/* 버튼 스타일링 */
				.btn-container {
				    display: flex;
				    justify-content: space-between;
				    margin-top: 20px; /* 버튼 위 여백 설정 */
				}
    </style>
</head>
<body>
<div class="container my-3">
    <h1 th:text="'글 조회 ' + ${post.id}"></h1>
    
    <form th:action="@{/post/create}" method="post" enctype="multipart/form-data" class="custom-form">
		<div class="mb-3" id="imagePathWrapper">
		    <label for="imagePath" class="form-label" style="display: none;">이미지 파일</label>
		    <input type="file" class="form-control" id="imagePath" name="imageFile" onchange="previewImage(event)" style="display: none;">
			<img th:src="@{${post.imagePath}}" id="imagePreview" alt="이미지 미리 보기">
		</div>
        <div class="mb-3 form-group">
            <label for="location" class="form-label">위치 정보</label>
			<select class="form-select" id="location" name="location" disabled>
			   <option th:value="${post.location}" th:text="${post.location}"></option>
			   <option value="서울">곽지</option>
			   <option value="경기">금능</option>
			   <option value="부산">김녕</option>
			   <option value="부산">사계</option>
			   <option value="부산">삼양</option>
			   <option value="부산">세화</option>
			   <option value="부산">소금막</option>
			   <option value="부산">쇠소깍</option>
			   <option value="부산">신양섭지</option>
			   <option value="부산">월정</option>
			   <option value="부산">이호테우</option>
			   <option value="부산">중문색달</option>
			   <option value="부산">평대</option>
			   <option value="부산">표선</option>
			   <option value="부산">하도</option>
			   <option value="부산">함덕</option>
			   <option value="부산">협재</option>
			   <option value="부산">화순금모래</option>
			</select>
        </div>
        <div class="mb-3 form-group">
            <label for="content" class="form-label">글 내용</label>
            <textarea class="form-control" id="content" name="content" rows="5" readonly th:text="${post.content}"></textarea>
        </div>
		
		<div class="btn-container">
			<button type="button" class="btn btn-secondary mt-3">
				<a th:href="@{/community}" class="text-light" style="text-decoration-line: none">목록으로</a>
			</button>
			<button type="button" class="btn btn-secondary mt-3">
				<a th:href="@{|/post/update/${post.id}|}" class="text-light" style="text-decoration-line: none">수정</a>
			</button>
			<button type="button" class="btn btn-secondary mt-3">
				<a th:href="@{|/post/delete/${post.id}|}" class="text-light" style="text-decoration-line: none">삭제</a>
			</button>
		</div>
    </form>
</div>


<script>
    function previewImage(event) {
        var input = event.target;
        var reader = new FileReader();

        reader.onload = function() {
            var imagePreview = document.getElementById('imagePreview');
            imagePreview.src = reader.result;
            imagePreview.style.display = 'block'; // 이미지 보이기
        };
        
        if (input.files && input.files[0]) {
            reader.readAsDataURL(input.files[0]); // 파일을 읽어옴
        }
    }
</script>

</body>
</html>
